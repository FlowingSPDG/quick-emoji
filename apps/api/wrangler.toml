name = "quick-emoji-api"
main = "src/index.ts"
compatibility_date = "2024-01-20"

# KV Namespaces - IDs are provided via environment variables from GitHub Secrets
kv_namespaces = [
  { binding = "EMOJI_DATA", id = "${EMOJI_DATA_ID}" },
  { binding = "GAME_SESSIONS", id = "${GAME_SESSIONS_ID}" },
  { binding = "LEADERBOARD", id = "${LEADERBOARD_ID}" }
]

# Environment variables (if needed)
[vars]
NODE_ENV = "production"

# Preview environment configuration (used for PR deployments)
[env.preview]
name = "quick-emoji-api-preview-${PR_NUMBER}"
# Preview environments use the same KV namespaces as production
kv_namespaces = [
  { binding = "EMOJI_DATA", id = "${EMOJI_DATA_ID}" },
  { binding = "GAME_SESSIONS", id = "${GAME_SESSIONS_ID}" },
  { binding = "LEADERBOARD", id = "${LEADERBOARD_ID}" }
]

[env.preview.vars]
NODE_ENV = "preview"