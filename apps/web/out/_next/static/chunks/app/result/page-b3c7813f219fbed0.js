(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[834],{4:(e,r,t)=>{"use strict";t.d(r,{A:()=>n});var s=t(4568);t(7620);let n=e=>{let{message:r="読み込み中...",size:t="medium",className:n=""}=e;return(0,s.jsxs)("div",{className:"loading ".concat(n),style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"2rem"},children:[(0,s.jsx)("div",{className:"".concat({small:"w-4 h-4",medium:"w-8 h-8",large:"w-12 h-12"}[t]," border-4 border-gray-300 border-t-blue-500 rounded-full animate-spin"),style:{marginBottom:"1rem"}}),r&&(0,s.jsx)("p",{style:{margin:0,color:"var(--text-color)",fontSize:"small"===t?"0.9rem":"1rem"},children:r})]})}},2883:(e,r,t)=>{"use strict";t.d(r,{hS:()=>a,uE:()=>o});class s extends Error{constructor(e,r){super(r),this.status=e,this.name="ApiError"}}async function n(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t="".concat("http://localhost:8787").concat(e),n={headers:{"Content-Type":"application/json",...r.headers},...r};try{let e=await fetch(t,n);if(!e.ok){let r=await e.json().catch(()=>({error:"Unknown error"}));throw new s(e.status,r.error||"HTTP ".concat(e.status))}return await e.json()}catch(e){if(e instanceof s)throw e;throw new s(0,"Network error or server unreachable")}}let o={emoji:{getEmojis:e=>{let r=new URLSearchParams;(null==e?void 0:e.platforms)&&r.append("platforms",e.platforms.join(",")),(null==e?void 0:e.difficulty)&&r.append("difficulty",e.difficulty),(null==e?void 0:e.count)&&r.append("count",e.count.toString());let t=r.toString();return n("/api/emojis".concat(t?"?".concat(t):""))}},session:{start:e=>n("/api/session/start",{method:"POST",body:JSON.stringify(e)}),answer:e=>n("/api/session/answer",{method:"POST",body:JSON.stringify(e)}),end:e=>n("/api/session/end",{method:"POST",body:JSON.stringify(e)})},leaderboard:{getLeaderboard:(e,r)=>{let t=new URLSearchParams;e&&t.append("limit",e.toString()),r&&t.append("platform",r);let s=t.toString();return n("/api/leaderboard".concat(s?"?".concat(s):""))}}},a=e=>{if(e instanceof s)switch(e.status){case 400:return"入力データが無効です。再度お試しください。";case 404:return"リソースが見つかりません。";case 429:return"リクエストが多すぎます。しばらく待ってから再度お試しください。";case 500:return"サーバーエラーが発生しました。しばらく待ってから再度お試しください。";case 0:return"ネットワーク接続を確認してください。";default:return e.message||"予期しないエラーが発生しました。"}return"予期しないエラーが発生しました。"}},3988:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>m});var s=t(4568),n=t(7620),o=t(7541),a=t(9664),i=t.n(a),l=t(2883),c=t(4);function d(){let e=(0,o.useRouter)(),r=(0,o.useSearchParams)().get("sessionId"),[t,a]=(0,n.useState)(null),[d,m]=(0,n.useState)(!0),[u,h]=(0,n.useState)(null);if((0,n.useEffect)(()=>{if(!r)return void e.push("/");(async()=>{try{a({finalScore:850,totalQuestions:10,correctAnswers:8,avgTime:12.5,leaderboardRank:15})}catch(e){h((0,l.hS)(e))}finally{m(!1)}})()},[r,e]),d)return(0,s.jsx)(c.A,{message:"結果を読み込み中...",size:"large"});if(u||!t)return(0,s.jsxs)("div",{className:"card",style:{maxWidth:"600px",margin:"2rem auto",textAlign:"center"},children:[(0,s.jsx)("div",{className:"error",children:u||"結果の読み込みに失敗しました"}),(0,s.jsx)(i(),{href:"/",className:"btn btn-primary",children:"ホームに戻る"})]});let f=Math.round(t.correctAnswers/t.totalQuestions*100);return(0,s.jsxs)("div",{className:"card",style:{maxWidth:"600px",margin:"2rem auto",textAlign:"center"},children:[(0,s.jsx)("h1",{style:{fontSize:"2rem",marginBottom:"1rem"},children:"ゲーム結果"}),(0,s.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,s.jsxs)("div",{style:{fontSize:"3rem",fontWeight:"bold",color:"var(--primary-color)",marginBottom:"0.5rem"},children:[t.finalScore,"点"]}),t.leaderboardRank&&(0,s.jsxs)("div",{style:{fontSize:"1.25rem",color:"var(--success-color)"},children:["リーダーボード ",t.leaderboardRank,"位"]})]}),(0,s.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,s.jsx)("h2",{style:{fontSize:"1.5rem",marginBottom:"1rem"},children:"統計"}),(0,s.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",textAlign:"left"},children:[(0,s.jsxs)("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[(0,s.jsxs)("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"var(--success-color)"},children:[t.correctAnswers,"/",t.totalQuestions]}),(0,s.jsx)("div",{style:{fontSize:"0.9rem",color:"var(--text-color)"},children:"正解数"})]}),(0,s.jsxs)("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[(0,s.jsxs)("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"var(--primary-color)"},children:[f,"%"]}),(0,s.jsx)("div",{style:{fontSize:"0.9rem",color:"var(--text-color)"},children:"正答率"})]}),(0,s.jsxs)("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[(0,s.jsxs)("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"var(--warning-color)"},children:[t.avgTime.toFixed(1),"秒"]}),(0,s.jsx)("div",{style:{fontSize:"0.9rem",color:"var(--text-color)"},children:"平均回答時間"})]}),(0,s.jsxs)("div",{className:"card",style:{padding:"1rem",textAlign:"center"},children:[(0,s.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"var(--secondary-color)"},children:t.totalQuestions-t.correctAnswers}),(0,s.jsx)("div",{style:{fontSize:"0.9rem",color:"var(--text-color)"},children:"不正解数"})]})]})]}),(0,s.jsxs)("div",{style:{marginBottom:"2rem"},children:[f>=90&&(0,s.jsx)("div",{style:{color:"var(--success-color)",fontWeight:"bold"},children:"\uD83C\uDF89 素晴らしい成績です！"}),f>=70&&f<90&&(0,s.jsx)("div",{style:{color:"var(--primary-color)",fontWeight:"bold"},children:"\uD83D\uDC4D 良い成績です！"}),f>=50&&f<70&&(0,s.jsx)("div",{style:{color:"var(--warning-color)",fontWeight:"bold"},children:"\uD83E\uDD14 もう少し練習してみましょう！"}),f<50&&(0,s.jsx)("div",{style:{color:"var(--danger-color)",fontWeight:"bold"},children:"\uD83D\uDCAA 次は頑張りましょう！"})]}),(0,s.jsxs)("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",flexWrap:"wrap"},children:[(0,s.jsx)(i(),{href:"/settings",className:"btn btn-primary",children:"もう一度プレイ"}),(0,s.jsx)(i(),{href:"/leaderboard",className:"btn btn-secondary",children:"リーダーボード"}),(0,s.jsx)(i(),{href:"/",className:"btn btn-secondary",children:"ホームに戻る"})]})]})}function m(){return(0,s.jsx)(n.Suspense,{fallback:(0,s.jsx)(c.A,{message:"結果を読み込み中...",size:"large"}),children:(0,s.jsx)(d,{})})}},7541:(e,r,t)=>{"use strict";var s=t(3041);t.o(s,"useRouter")&&t.d(r,{useRouter:function(){return s.useRouter}}),t.o(s,"useSearchParams")&&t.d(r,{useSearchParams:function(){return s.useSearchParams}})},9769:(e,r,t)=>{Promise.resolve().then(t.bind(t,3988))}},e=>{e.O(0,[664,587,18,358],()=>e(e.s=9769)),_N_E=e.O()}]);