(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[410],{4:(e,r,t)=>{"use strict";t.d(r,{A:()=>l});var s=t(4568);t(7620);let l=e=>{let{message:r="読み込み中...",size:t="medium",className:l=""}=e;return(0,s.jsxs)("div",{className:"loading ".concat(l),style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"2rem"},children:[(0,s.jsx)("div",{className:"".concat({small:"w-4 h-4",medium:"w-8 h-8",large:"w-12 h-12"}[t]," border-4 border-gray-300 border-t-blue-500 rounded-full animate-spin"),style:{marginBottom:"1rem"}}),r&&(0,s.jsx)("p",{style:{margin:0,color:"var(--text-color)",fontSize:"small"===t?"0.9rem":"1rem"},children:r})]})}},2883:(e,r,t)=>{"use strict";t.d(r,{hS:()=>a,uE:()=>n});class s extends Error{constructor(e,r){super(r),this.status=e,this.name="ApiError"}}async function l(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t="".concat("http://localhost:8787").concat(e),l={headers:{"Content-Type":"application/json",...r.headers},...r};try{let e=await fetch(t,l);if(!e.ok){let r=await e.json().catch(()=>({error:"Unknown error"}));throw new s(e.status,r.error||"HTTP ".concat(e.status))}return await e.json()}catch(e){if(e instanceof s)throw e;throw new s(0,"Network error or server unreachable")}}let n={emoji:{getEmojis:e=>{let r=new URLSearchParams;(null==e?void 0:e.platforms)&&r.append("platforms",e.platforms.join(",")),(null==e?void 0:e.difficulty)&&r.append("difficulty",e.difficulty),(null==e?void 0:e.count)&&r.append("count",e.count.toString());let t=r.toString();return l("/api/emojis".concat(t?"?".concat(t):""))}},session:{start:e=>l("/api/session/start",{method:"POST",body:JSON.stringify(e)}),answer:e=>l("/api/session/answer",{method:"POST",body:JSON.stringify(e)}),end:e=>l("/api/session/end",{method:"POST",body:JSON.stringify(e)})},leaderboard:{getLeaderboard:(e,r)=>{let t=new URLSearchParams;e&&t.append("limit",e.toString()),r&&t.append("platform",r);let s=t.toString();return l("/api/leaderboard".concat(s?"?".concat(s):""))}}},a=e=>{if(e instanceof s)switch(e.status){case 400:return"入力データが無効です。再度お試しください。";case 404:return"リソースが見つかりません。";case 429:return"リクエストが多すぎます。しばらく待ってから再度お試しください。";case 500:return"サーバーエラーが発生しました。しばらく待ってから再度お試しください。";case 0:return"ネットワーク接続を確認してください。";default:return e.message||"予期しないエラーが発生しました。"}return"予期しないエラーが発生しました。"}},3954:(e,r,t)=>{"use strict";t.d(r,{a$:()=>n,My:()=>l,YN:()=>s});let s={github:"GitHub",slack:"Slack",discord:"Discord",unicode:"Unicode Official"},l={easy:"Easy",medium:"Medium",hard:"Hard",all:"All"},n={platforms:["github","slack"],difficulty:"all",timeLimit:30,questionCount:10,minQuestionCount:5,maxQuestionCount:50,minTimeLimit:15,maxTimeLimit:60}},4380:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>d});var s=t(4568),l=t(7620),n=t(9664),a=t.n(n),i=t(3954),o=t(2883),c=t(4);function d(){var e;let[r,t]=(0,l.useState)([]),[n,d]=(0,l.useState)(!0),[m,h]=(0,l.useState)(null),[u,x]=(0,l.useState)("all"),p=async e=>{try{d(!0),h(null);let r=await o.uE.leaderboard.getLeaderboard(50,e&&"all"!==e?e:void 0);t(r.leaderboard)}catch(e){h((0,o.hS)(e))}finally{d(!1)}};(0,l.useEffect)(()=>{p("all"===u?void 0:u)},[u]);let y=e=>{x(e)};return n&&0===r.length?(0,s.jsx)(c.A,{message:"リーダーボードを読み込み中...",size:"large"}):(0,s.jsxs)("div",{className:"card",style:{maxWidth:"1000px",margin:"0 auto"},children:[(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[(0,s.jsx)("h1",{style:{margin:0},children:"リーダーボード"}),(0,s.jsx)(a(),{href:"/",className:"btn btn-secondary",children:"ホームに戻る"})]}),m&&(0,s.jsx)("div",{className:"error",style:{marginBottom:"1rem"},children:m}),(0,s.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,s.jsx)("div",{className:"form-group",style:{marginBottom:"1rem"},children:(0,s.jsx)("label",{className:"form-label",children:"プラットフォームでフィルタ"})}),(0,s.jsxs)("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[(0,s.jsx)("button",{className:"btn ".concat("all"===u?"btn-primary":"btn-secondary"),onClick:()=>y("all"),children:"すべて"}),Object.keys(i.YN).map(e=>(0,s.jsx)("button",{className:"btn ".concat(u===e?"btn-primary":"btn-secondary"),onClick:()=>y(e),children:i.YN[e]},e))]})]}),0===r.length?(0,s.jsxs)("div",{style:{textAlign:"center",padding:"3rem",color:"var(--text-color)"},children:[(0,s.jsx)("p",{children:"まだスコアがありません。"}),(0,s.jsx)("p",{children:"最初のプレイヤーになってみましょう！"}),(0,s.jsx)(a(),{href:"/settings",className:"btn btn-primary",style:{marginTop:"1rem"},children:"ゲーム開始"})]}):(0,s.jsx)("div",{className:"leaderboard-table-container",children:(0,s.jsxs)("table",{className:"leaderboard-table",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"順位"}),(0,s.jsx)("th",{children:"プレイヤー"}),(0,s.jsx)("th",{children:"スコア"}),(0,s.jsx)("th",{children:"平均時間"}),(0,s.jsx)("th",{children:"プラットフォーム"}),(0,s.jsx)("th",{children:"日付"})]})}),(0,s.jsx)("tbody",{children:r.map((e,r)=>{let t;return(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)("div",{className:"leaderboard-rank",children:r+1})}),(0,s.jsx)("td",{style:{fontWeight:"500"},children:e.username}),(0,s.jsxs)("td",{style:{fontWeight:"bold",color:"var(--primary-color)"},children:[e.score.toLocaleString(),"点"]}),(0,s.jsx)("td",{children:(t=e.avgTime,"".concat(t.toFixed(1),"秒"))}),(0,s.jsx)("td",{children:(0,s.jsx)("div",{style:{display:"flex",gap:"0.25rem",flexWrap:"wrap"},children:e.platforms.map(e=>(0,s.jsx)("span",{style:{fontSize:"0.8rem",padding:"0.25rem 0.5rem",backgroundColor:"var(--border-color)",borderRadius:"4px",color:"var(--text-color)"},children:i.YN[e]},e))})}),(0,s.jsx)("td",{style:{fontSize:"0.9rem",color:"var(--text-color)"},children:new Date(e.timestamp).toLocaleDateString("ja-JP")})]},"".concat(e.userId,"-").concat(e.timestamp))})})]})}),r.length>0&&(0,s.jsxs)("div",{style:{marginTop:"2rem",padding:"1.5rem",backgroundColor:"var(--bg-color)",border:"1px solid var(--border-color)",borderRadius:"8px"},children:[(0,s.jsx)("h3",{style:{marginBottom:"1rem",fontSize:"1.25rem"},children:"統計情報"}),(0,s.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(150px, 1fr))",gap:"1rem"},children:[(0,s.jsxs)("div",{style:{textAlign:"center"},children:[(0,s.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"var(--primary-color)"},children:(null==(e=r[0])?void 0:e.score.toLocaleString())||0}),(0,s.jsx)("div",{style:{fontSize:"0.9rem",color:"var(--text-color)"},children:"最高スコア"})]}),(0,s.jsxs)("div",{style:{textAlign:"center"},children:[(0,s.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"var(--success-color)"},children:r.length}),(0,s.jsx)("div",{style:{fontSize:"0.9rem",color:"var(--text-color)"},children:"総プレイ回数"})]}),(0,s.jsxs)("div",{style:{textAlign:"center"},children:[(0,s.jsxs)("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"var(--warning-color)"},children:[r.length>0?(r.reduce((e,r)=>e+r.avgTime,0)/r.length).toFixed(1):0,"秒"]}),(0,s.jsx)("div",{style:{fontSize:"0.9rem",color:"var(--text-color)"},children:"平均回答時間"})]})]})]}),(0,s.jsxs)("div",{style:{display:"flex",gap:"1rem",justifyContent:"center",marginTop:"2rem"},children:[(0,s.jsx)(a(),{href:"/settings",className:"btn btn-primary",children:"チャレンジする"}),(0,s.jsx)("button",{className:"btn btn-secondary",onClick:()=>p("all"===u?void 0:u),disabled:n,children:n?"更新中...":"更新"})]})]})}},8529:(e,r,t)=>{Promise.resolve().then(t.bind(t,4380))}},e=>{e.O(0,[664,587,18,358],()=>e(e.s=8529)),_N_E=e.O()}]);